{% extends 'base.html' %} {% load static widget_tweaks crispy_forms_tags %} {% block Content %}
{% if messages %}
<ul class="messages">
  {% for message in messages %}

  <div
    class="alert alert-danger alert-dismissible fade show"
    role="alert"
    style="z-index: 5000000000000000"
  >
    {{ message }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
  </div>
  {% endfor %}
</ul>
{% endif %}

{% comment %}

<div class="color_switcher">
  <div class="switcherbutton" onclick="active()">
    <!-- <i class="fas fa-cog"></i> -->
    <i class="fa-solid fa-palette"></i>
  </div>
  <h3>Select Color</h3>
  <div class="theme_button_container">
    <span
      class="theme_button"
      data-color="#fff"
      style="background: rgb(69, 65, 65)"
      onclick="changecolor('rgb(69, 65, 65)')"
    >
    </span>
    <span
      class="theme_button"
      data-color="#fff"
      style="background: rgb(203, 30, 30)"
      onclick="changecolor('rgb(203, 30, 30)')"
    >
    </span>
    <span
      class="theme_button"
      data-color="#fff"
      style="background: rgb(20, 245, 54)"
      onclick="changecolor('rgb(20, 245, 54)')"
    >
    </span>
    <span
      class="theme_button"
      data-color="#fff"
      style="background: rgb(20, 245, 54)"
      onclick="changecolor('rgb(20, 245, 54)')"
    >
    </span>
    <span
      class="theme_button"
      data-color="#fff"
      style="background: rgb(20, 245, 54)"
      onclick="changecolor('rgb(20, 245, 54)')"
    >
    </span>
    <span
      class="theme_button"
      data-color="#fff"
      style="background: rgb(40, 7, 49)"
      onclick="changecolor('#fff')"
    >
    </span>
  </div>
</div>

<div class="container">
  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {{form2}}
    {{form1}}
    <button
      type="submit"
      class="btn btn-lg"
      style="margin-right: 1rem; background-color: #ff4b2b; color: #fff"
    >
      Save
    </button>
  </form>
</div>

<script>
  function active() {
    document.querySelector(".color_switcher").classList.toggle("active");
  }
  let themebutton = document.querySelectorAll("theme_button");
  console.log(themebutton);
  function changecolor(color) {
    document.querySelector(":root").style.setProperty("--main-color", color);
    // localStorage.setItem("theme", color);
  }
  themebutton.forEach((color) => {
    color.addEventListener("Click", () => {
      let dataColor = color.getAttribute("data-color");
      console.log(dataColor);
      document
        .querySelector(":root")
        .style.setProperty("--main-color", dataColor);
    });
  });
  function initThemeSelector() {
    const themeSelect = document.getElementById("themeSelect");
    const themeStylesheetLink = document.getElementById("stylesheetlink");
    const currentTheme = localStorage.getItem("theme") || "default";

    function activateTheme(themeName) {
      themeStylesheetLink.setAttribute("href", `css/themes/${themeName}.css`);
    }

    themeSelect.addEventListener("change", () => {
      activateTheme(themeSelect.value);
      localStorage.setItem("theme", themeSelect.value);
    });

    themeSelect.value = currentTheme;
    activateTheme(currentTheme);
  }

  initThemeSelector();
</script>
{% endblock %} {% endcomment %}


    <div class="m-4">
      <div class="main-body">
        <div class="row">
          <div class="col-lg-8">
            <div class="card">
              <div class="card-body">
                <form method="post"  enctype="multipart/form-data">
                  {% csrf_token %}
                  {{form2|crispy}}
                  {{form1|crispy}}
                {% comment %} <div class="row mb-3">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Username</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    {% render_field form2.username class="form-control" placeholder="Enter username" %}

                  </div>
                  <div class="col-sm-3">
                    <h6 class="mb-0">Full Name</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    {% render_field form1.Name class="form-control" placeholder="Enter Full Name" %}

                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Profesion</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    {% render_field form1.profession class="form-control" placeholder=form1.profession.label %}

                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Email</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    {% render_field form1.emiall class="form-control" placeholder=form1.emiall.label %}
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Phone</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    {% render_field form1.number type="tel" id="phone" class="form-control" %}
                  </div>
                  <div class="alert alert-info" style="display: none"></div>
                </div>
                <div class="row mb-3">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Profile Picture</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    {% render_field form1.image class="form-control" %}
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-sm-3">
                    <h6 class="mb-0">color</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    {% render_field form1.color class="form-control" %}
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-3"></div> {% endcomment %}
                  <div class="col-sm-9 text-secondary">
                    <button
                      type="submit"
                      class="btn btn-primary px-4"
                      
                    >Save Changes</button>
                  
                  </div>
                </div>
              </form>
              </div>
              <button
                      class="btn px-4"
                      style="background-color: #ff405d; color: #fff"
                      hx-get="{% url 'linkform' %}"
                      hx-swap="beforeend"
                      hx-target="#linkforms"
                      {% comment %} onclick="show()" {% endcomment %}

                    >Add Link</button>
            <div id="linkforms">
            {% for Link in links %}
            {% include 'partials/link_detail.html' %}
            {% endfor %}
          </div>
          </div>
        </div>
      </div>
    </div>

    <style type="text/css">
      .row {
        justify-content: center;
      }
      .hide {
        display: none;
      }
      .card {
        position: relative;
        display: flex;
        flex-direction: column;
        min-width: 0;
        word-wrap: break-word;
        background-color: #fff;
        background-clip: border-box;
        border: 0 solid transparent;
        border-radius: 0.25rem;
        margin-bottom: 1.5rem;
        box-shadow: 0 2px 6px 0 rgb(218 218 253 / 65%),
          0 2px 6px 0 rgb(206 206 238 / 54%);
      }
      .me-2 {
        margin-right: 0.5rem !important;
      }
    </style>

    <script type="text/javascript"></script>
    <script>
      function getIp(callback) {
        fetch("https://ipinfo.io/json?token=<your token>", {
          headers: { Accept: "application/json" },
        })
          .then((resp) => resp.json())
          .catch(() => {
            return {
              country: "us",
            };
          })
          .then((resp) => callback(resp.country));
      }

      const phoneInputField = document.querySelector("#phone");
      const phoneInput = window.intlTelInput(phoneInputField, {
        utilsScript:
          "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
      });
      const info = document.querySelector(".alert-info");

      function process(event) {
        event.preventDefault();

        const phoneNumber = phoneInput.getNumber();

        info.style.display = "";
        info.innerHTML = `Phone number in E.164 format: <strong>${phoneNumber}</strong>`;
      }
      function show() {
        document.getElementById("addlink").style.display = "flex";
        console.log("show is clicked");
      }
      function hide() {
        document.getElementById("addlink").style.display = "none";
        console.log("show is clicked");
      }
    </script>
{% endblock %}